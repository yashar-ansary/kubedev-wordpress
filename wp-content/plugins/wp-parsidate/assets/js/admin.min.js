jQuery(document).ready(function(){function h(a){return 0===a%4&&0!==a%100||0===a%400&&0===a%100?!0:!1}function l(a,b,c){var d=[31,28,31,30,31,30,31,31,30,31,30,31],e=[31,29,31,30,31,30,31,31,30,31,30,31];b=[0,0,31,62,93,124,155,186,216,246,276,306,336,365][parseInt(b)]+parseInt(c);c=parseInt(a)+621;286<b&&c++;h(c-1)&&286<b&&b--;b=286<b?b-286:b+79;if(h(c))for(a=0;b>e[a];a++)b-=e[a];else for(a=0;b>d[a];a++)b-=d[a];a++;10>a&&(a="0"+a);return[c,a,b]}function m(a,b,c){var d=[31,31,31,31,31,31,30,30,30,
30,30,29],e=[0,0,31,59,90,120,151,181,212,243,273,304,334,365][parseInt(b)]+parseInt(c),f=h(a);c=h(a-1);if(79<e)b=f?e-78:e-79,a-=621;else if(b=c||f&&2<b?287+e:286+e,a-=622,!1===c&&366===b)return[a,12,30];for(c=0;b>d[c];c++)b-=d[c];d=++c;d=10>d?d="0"+d:d;return[a,d,b]}function n(a,b,c,d,e){for(var f='<div class="timestamp-wrap persian"><select id="mma" name="mma">',g=1;13>g;g++)f=g===parseInt(b)?f+('<option value="'+g+'" selected="selected">'+p[g]+"</option>"):f+('<option value="'+g+'">'+p[g]+"</option>");
return f+('</select><input type="text" id="jja" name="jja" value="'+c+'" size="2" maxlength="2" autocomplete="off" />,<input type="text" id="aaa" name="aaa" value="'+a+'" size="4" maxlength="4" autocomplete="off" /> \u062f\u0631 <input type="text" id="hha" name="hha" value="'+d+'" size="2" maxlength="2" autocomplete="off" /> : <input type="text" id="mna" name="mna" value="'+e+'" size="2" maxlength="2" autocomplete="off" /></div>')}function q(){var a=jQuery("#timestamp b").text(),b=jQuery("#mma option:selected").text()+
" "+jQuery("#jja").val()+", "+jQuery("#aaa").val()+" \u062f\u0631 "+jQuery("#hha").val()+":"+jQuery("#mna").val();b=b.replace(/\d+/g,function(c){for(var d="",e=0,f=c.length;e<f;e++)d+=String.fromCharCode(c.charCodeAt(e)+1728);return d});a!=b&&(jQuery("#timestamp b").html(b),clearInterval(k))}var p=" \u0641\u0631\u0648\u0631\u062f\u06cc\u0646 \u0627\u0631\u062f\u06cc\u0628\u0647\u0634\u062a \u062e\u0631\u062f\u0627\u062f \u062a\u06cc\u0631 \u0645\u0631\u062f\u0627\u062f \u0634\u0647\u0631\u06cc\u0648\u0631 \u0645\u0647\u0631 \u0622\u0628\u0627\u0646 \u0622\u0630\u0631 \u062f\u06cc \u0628\u0647\u0645\u0646 \u0627\u0633\u0641\u0646\u062f".split(" ");
jQuery(".wp-editor-wrap.html-active #content").css("direction","ltr");jQuery("a.edit-timestamp").on("click",function(){jQuery(".persian").remove();var a=m(jQuery("#aa").val(),jQuery("#mm").val(),jQuery("#jj").val());a=n(a[0],a[1],a[2],jQuery("#hh").val(),jQuery("#mn").val());jQuery("#timestampdiv").prepend(a);jQuery("#timestampdiv .timestamp-wrap:eq(1)").hide()});jQuery("#the-list").on("click",".editinline",function(){var a=jQuery(this).closest("td"),b=a.find(".aa").html();if(1400<b){var c=a.find(".mm").html(),
d=a.find(".jj").html(),e=a.find(".hh").html();a=a.find(".mn").html();b=m(b,c,d);jQuery(".persian").remove();jQuery(".inline-edit-date").prepend(n(b[0],b[1],b[2],e,a));jQuery(".inline-edit-date div:eq(1)").hide()}});jQuery("#timestampdiv,.inline-edit-date").on("keyup","#hha",function(){jQuery("input[name=hh]").val(jQuery(this).val())}).on("keyup","#mna",function(){jQuery("input[name=mn]").val(jQuery(this).val())}).on("keyup","#aaa , #jja",function(){var a=jQuery("#aaa").val(),b=jQuery("#mma").val(),
c=jQuery("#jja").val();date=l(a,b,c);jQuery("input[name=aa]").val(date[0]);jQuery("select[name=mm]").val(date[1]);jQuery("input[name=jj]").val(date[2])}).on("change","#mma",function(){var a=jQuery("#aaa").val(),b=jQuery("#mma").val(),c=jQuery("#jja").val();date=l(a,b,c);jQuery("input[name=aa]").val(date[0]);jQuery("select[name=mm]").val(date[1]);jQuery("input[name=jj]").val(date[2])});jQuery("select[name=m]").hide();var k;jQuery("#timestampdiv").on("keypress",function(a){13==a.which&&(k=setInterval(function(){q()},
50))});jQuery(".save-timestamp , .cancel-timestamp , #publish").on("click",function(){jQuery("#aaa").length&&(k=setInterval(function(){q()},50))})});