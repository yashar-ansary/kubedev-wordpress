/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
jQuery(function(M){function C(e,i,d){if(e.find(".bbp-reply-form form").find("#bbp-template-notices").html(""),"undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media){e.find(".gif-media-search-dropdown").removeClass("open"),e.find("#whats-new-toolbar .toolbar-button").removeClass("active disable");var o=e.find("#whats-new-attachments .forums-attached-gif-container");o.length&&(o.addClass("closed"),o.find(".gif-image-container img").attr("src",""),o[0].style=""),e.find("#bbp_media_gif").length&&e.find("#bbp_media_gif").val(""),void 0!==i&&d&&(void 0!==bp.Nouveau.Media.dropzone_obj[i]&&(bp.Nouveau.Media.dropzone_obj[i].destroy(),bp.Nouveau.Media.dropzone_obj.splice(i,1),bp.Nouveau.Media.dropzone_media.splice(i,1)),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"),e.find('div#forums-post-document-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-document-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"),e.find('div#forums-post-video-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-video-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"))}}M("body").hasClass("reply-edit")||M(".bbp-reply-form form").on("submit",function(e){if(e.preventDefault(),M(this).hasClass("submitting"))return!1;M(this).addClass("submitting");var i=!0,d=!0,o=M(e.target).find(".bbp-the-content").data("key"),t=!1;void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[o]&&(t=window.forums_medium_reply_editor[o]),(0<M(this).find("#bbp_media").length&&0<M(this).find("#bbp_document").length&&0<M(this).find("#bbp_video").length&&0<M(this).find("#bbp_media_gif").length&&""==M(this).find("#bbp_media").val()&&""==M(this).find("#bbp_document").val()&&""==M(this).find("#bbp_video").val()&&""==M(this).find("#bbp_media_gif").val()||0<M(this).find("#bbp_media").length&&0<M(this).find("#bbp_document").length&&0<M(this).find("#bbp_video").length&&M(this).find("#bbp_media_gif").length<=0&&""==M(this).find("#bbp_media").val()&&""==M(this).find("#bbp_video").val()&&""==M(this).find("#bbp_document").val()||0<M(this).find("#bbp_media_gif").length&&M(this).find("#bbp_media").length<=0&&M(this).find("#bbp_document").length<=0&&M(this).find("#bbp_video").length<=0&&""==M(this).find("#bbp_media_gif").val())&&(d=!1),t&&""===M(M.parseHTML(M(this).find("#bbp_reply_content").val())).text().trim()&&0==d?(M(this).find(".bbp-the-content").addClass("error"),i=!1):t||""!==M.trim(M(this).find("#bbp_reply_content").val())||0!=d?(t&&M(this).find(".bbp-the-content").removeClass("error"),M(this).find("#bbp_reply_content").removeClass("error")):(M(this).find("#bbp_reply_content").addClass("error"),i=!1),i?function(e,i,d,o){var w={action:e,nonce:i};M.each(d,function(e,i){"action"===i.name?w.bbp_reply_form_action=i.value:w[i.name]=i.value});var N=o.closest("#bbpress-forums");M.post(window.bbpReplyAjaxJS.bbp_ajaxurl,w,function(e){if(e.success){N.find(".bbp-reply-form form").removeClass("submitting");var i="",d=M(".bb-quick-reply-form-wrap");if("edit"===e.reply_type)i='<li class="highlight">'+e.content+"</li>",M("#post-"+e.reply_id).parent("li").replaceWith(i);else{if(window.bbpReplyAjaxJS.threaded_reply&&e.reply_parent&&e.reply_parent!==e.reply_id){var o=null,t="1";if(M("#post-"+e.reply_parent).parent("li").data("depth")==window.bbpReplyAjaxJS.threaded_reply_depth){var a=parseInt(window.bbpReplyAjaxJS.threaded_reply_depth)-1;o=M("#post-"+e.reply_parent).closest("li.depth-"+a),t=window.bbpReplyAjaxJS.threaded_reply_depth}else o=M("#post-"+e.reply_parent).parent("li"),t=parseInt(o.data("depth"))+1;var p="ul";N.find(".bb-single-reply-list").is("ol")&&(p="ol"),o.find(">"+p+".bbp-threaded-replies").length||o.append("<"+p+' class="bbp-threaded-replies"></'+p+">"),i='<li class="highlight depth-'+t+'" data-depth="'+t+'">'+e.content+"</li>",o.find(">"+p+".bbp-threaded-replies").append(i)}else if(e.current_page==e.total_pages)i='<li class="highlight depth-1" data-depth="1">'+e.content+"</li>",N.find(".bb-single-reply-list").append(i);else{var n=e.redirect_url,r=n.substring(0,n.indexOf("#"));d.length||d.is(":visible")||(window.location.href=r)}jQuery(window).scroll()}if(""!==e.tags){var s=M("body .item-tags"),l=M("body .item-tags ul");"none"===s.css("display")?(s.append(e.tags),s.show()):(l.remove(),s.append(e.tags))}""!=i&&(M("body").animate({scrollTop:M(i).offset().top},500),setTimeout(function(){M(i).removeClass("highlight")},2e3));var b=N.find(".bbp-reply-form form").find("#forums-post-media-uploader").data("key"),f=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[b]&&bp.Nouveau.Media.dropzone_media[b].length){f=!0;for(var m=0;m<bp.Nouveau.Media.dropzone_media[b].length;m++)bp.Nouveau.Media.dropzone_media[b][m].saved=!0}var u=N.find(".bbp-reply-form form").find("#forums-post-document-uploader").data("key"),v=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[u]&&bp.Nouveau.Media.dropzone_media[u].length){v=!0;for(m=0;m<bp.Nouveau.Media.dropzone_media[u].length;m++)bp.Nouveau.Media.dropzone_media[u][m].saved=!0}var _=N.find(".bbp-reply-form form").find("#forums-post-video-uploader").data("key"),h=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[_]&&bp.Nouveau.Media.dropzone_media[_].length){h=!0;for(m=0;m<bp.Nouveau.Media.dropzone_media[_].length;m++)bp.Nouveau.Media.dropzone_media[_][m].saved=!0}var c=N.find(".bbp-reply-form form").find(".bbp-the-content").data("key");void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[c]&&(window.forums_medium_reply_editor[c].execAction("selectAll"),window.forums_medium_reply_editor[c].execAction("removeFormate"),window.forums_medium_reply_editor[c].resetContent()),N.find(".bbp-reply-form form").find(".bbp-the-content").removeClass("error"),d.length&&d.is(":visible")?N.find(".bbp-reply-form").hide():N.find("#bbp-close-btn").trigger("click"),N.find("#bbp_reply_content").val(""),C(N,b,f),C(N,u,v),C(N,_,h);var y=N.find(".scrubberpost");if(y.length)for(var g in y)if(M(y[g]).hasClass("post-"+e.reply_id)){window.BuddyBossThemeBbpScrubber.goToPost(parseInt(g,10)+1,"");break}}else void 0!==e.content&&N.find(".bbp-reply-form form").find("#bbp-template-notices").html(e.content);N.find(".bbp-reply-form form").removeClass("submitting"),M(".bbp-reply-form").trigger("bbp_after_submit_reply_form",{response:e,topic_id:w.bbp_topic_id})})}("reply",window.bbpReplyAjaxJS.reply_nonce,M(this).serializeArray(),M(this)):M(this).removeClass("submitting")})});